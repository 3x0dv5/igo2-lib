<igo-list *ngIf="permissions">
  <ng-template ngFor let-groupPermissions [ngForOf]="permissions | keyvalue">
    <igo-collapsible
      *ngIf="groupPermissions.value.length"
      [title]="'igo.permission.' + groupPermissions.key | translate">

      <ng-template ngFor let-permission [ngForOf]="groupPermissions.value">
        <md-list-item>
          <md-icon md-list-avatar>perm_identity</md-icon>
          <h4 md-line>{{permission.profil}}</h4>

          <div igoStopPropagation
               class="igo-actions-container">

             <button
               md-icon-button
               [md-tooltip]="'igo.permission.delete' | translate"
               color="warn"
               (click)="removePermission.emit(permission)">
               <md-icon>delete</md-icon>
             </button>
          </div>

        </md-list-item>
      </ng-template>
    </igo-collapsible>
  </ng-template>
</igo-list>

<form class="igo-form" [formGroup]="form"
  (ngSubmit)="handleFormSubmit(form.value)">

  <md-form-field class="full-width">
    <input mdInput required
           [placeholder]="'igo.permission.profil' | translate"
           formControlName="profil">
   <md-error>
     {{ 'igo.permission.profilRequired' | translate }}
   </md-error>
  </md-form-field>


  <md-radio-group formControlName="typePermission">
    <md-radio-button value="read">
      {{ 'igo.permission.read' | translate }}
    </md-radio-button>
    <md-radio-button value="write">
      {{ 'igo.permission.write' | translate }}
    </md-radio-button>
  </md-radio-group>


  <div class="igo-form-button-group">
    <button
      md-raised-button
      type="submit"
      [disabled]="!form.valid">
      {{ 'igo.permission.addBtn' | translate }}
    </button>
  </div>

</form>
